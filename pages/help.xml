<helpDefinition>
  <title>EC-ESX - Help</title>
  <componentContainer>
	<LINK REL="StyleSheet" HREF="../../plugins/EC-ESX/pluginhelp.css" TYPE="text/css" MEDIA="screen"/>
	<div class="help" >
    
    <h1 class="help">EC-ESX</h1>

    <h2 class="help">Overview</h2>
		<p class="help">
        The EC-ESX plugin allows users to manipulate virtual machines on ESX servers. This plugin provides the following procedures: Cleanup, Clone, Create, CreateResourceFromVM, Export, GetVMConfiguration, Import, PowerOn, PowerOff, RegisterVM, Relocate, Revert, Shutdown, Snapshot, and Suspend.
		</p>
	
	<p class="help">
		<b>Supported ESX version</b><br/>
	    This plugin was developed and tested with ESX version 4.1.
    </p>
	<p class="help">
		<b>Note:</b> VMware limited remote access to read-only for the <b>free</b> version of ESXi beginning with <b>ESXi 3.5 Update 4</b>. Because this plugin uses the vSphere SDK for Perl, which requires remote access, if this plugin is used against any of the restricted versions, you will receive a "RestrictedVersionFault" error. If you use a previous version of ESXi (earlier than version 3.5 U4) or a licensed version of ESXi, this plugin will work successfully.
	</p>

    <h2 class="help">Configuration</h2>
	<p class="help">
	To enable Commander to communicate with ESX, create an ESX configuration, supplying the following information:
	</p>	
	<ul>
		<li><b>Configuration Name</b> - Provide a unique name for the configuration, keeping in mind that you may need to create additional configurations over time.</li>
		<li><b>ESX URL</b> - Provide the URL of the ESX server.</li>
          	<li><b>Credential</b> - Provide the user name and password Commander uses to communicate with the ESX server.</li>	                  
    	</ul>    	
			

	<h2 class="help">Using the Plugin</h2>
	<p class="help">
	    See the <a href="/commander/link/showHelp?page=plugins&amp;section=using">Commander online help system</a> for details about how to use this plugin within a procedure.
	    </p>
	    
	    <p class="help">
	    When you provide information for this plugin, fill-in the fields as follows:
	    </p>

        <p class="help">
	The Cleanup subprocedure deletes ElectricCommander resources and optionally destroys the virtual machines on the ESX server. Cleanup has the following fields:
		<ul>
			<li><b>connection_config</b> - Provide the name of the configuration that contains connection information for the ESX server.</li>
			<li><b>esx_vmname</b> - Provide the name of the virtual machine to clean up.</li>
			<li><b>esx_delete_vm</b> - If checked, this destroys the virtual machine.</li>
			
			<li><b>esx_number_of_vms</b> - Indicate the number of virtual machines to clean up. The default is 1. If the value is greater than 1, a suffix is added to VM names. The suffix consists of an underscore and the VM number ('_#').</li>
			
			<li><b>esx_timeout</b> - Specify the step execution timeout length in minutes. Leave blank for no timeout.</li>
		</ul>
		</p>		
		<p class="help">
		The Clone subprocedure creates one or more clones of a virtual machine.		Clone has the following fields:
		<ul>
			<li><b>connection_config</b> - Provide the name of the configuration that contains connection information for the ESX server.</li>
			<li><b>esx_vmname</b> - Provide the name of the virtual machine to clone.</li>
			<li><b>esx_datastore</b> - Provide the name of the datastore. The default is the datastore with the most free space.</li>
			<li><b>esx_vmname_destination</b> - Name the virtual machine that will be created.</li>
			<li><b>esx_vmhost_destination</b> - Indicate the target host for the new virtual machine.</li>
			
			<li><b>esx_number_of_clones</b> - Indicate the number of clones to create. The default is 1. If the value is greater than 1, a suffix is added to cloned VM names. The suffix consists of an underscore and the clone number ('_#').</li>
			
			<li><b>esx_timeout</b> - Specify the step execution timeout length in minutes. Leave blank for no timeout.</li>
		</ul>
		</p>		
		<p class="help">
		The Create subprocedure creates virtual machines on the ESX server.
		Create has the following fields:
		<ul>
			<li><b>connection_config</b> - Provide the name of the configuration that contains connection information for the ESX server.</li>
			<li><b>esx_vmname</b> - Provide the name the virtual machine to be created.</li>
			<li><b>esx_datastore</b> - Provide the name of the datastore. The default  is any accessible datastore with free space greater than the disk size specified.</li>
			<li><b>esx_vmhost</b> - Provide the name of the host.</li>
			<li><b>esx_datacenter</b> - Provide the name of the datacenter.</li>
			<li><b>esx_guestid</b> - Provide the guest operating system identifier. The default is 'winXPProGuest'.</li>
			<li><b>esx_disksize</b> - Indicate the capacity of the virtual disk (in KB). The default is 4096.</li>
			<li><b>esx_memory</b> - Indicate the size of the virtual machine's memory (in MB). The default is 256.</li>
			<li><b>esx_num_cpus</b> - Indicate the number of virtual processors in a virtual machine. The default is 1.</li>
			<li><b>esx_nic_network</b> - Provide the network name. The default is any accessible network.</li>
			<li><b>esx_nic_poweron</b> - If checked, this connects the device when the virtual machine starts.</li>
			<li><b>esx_vm_poweron</b> - If checked, this powers on the created virtual machine(s).</li>
			<li><b>esx_number_of_vms</b> - Indicate the number of virtual machines to create. The default is 1. If the value is greater than 1, a suffix is added to VM names. The suffix consists of an underscore and the VM number ('_#').</li>
			<li><b>esx_timeout</b> - Specify the step execution timeout length in minutes. Leave blank for no timeout.</li>
		</ul>
		</p>
		
		<p class="help">
		The CreateResourceFromVM subprocedure has the same functionality as the GetVMConfiguration subprocedure, and additionally creates an ElectricCommander resource for each virtual machine.
		CreateResourceFromVM has the following fields:
		<ul>
			<li><b>connection_config</b> - Provide the name of the configuration that contains connection information for the ESX server.</li>
			<li><b>esx_vmname</b> - Provide the name of the virtual machine from which to get information.</li>
			<li><b>esx_properties_location</b> - Indicate the ElectricCommander location to store properties containing information about the powered on virtual machines. The default is '/myJob/ESX/vms'.</li>
			<li><b>esx_create_resources</b> - If checked, this creates ElectricCommander resources for the created virtual machines.</li>
			<li><b>esx_pools</b> - Provide the ElectricCommander resource pool names to associate with the created resources if created.</li>
			<li><b>esx_workspace</b> - Indicate the ElectricCommander workspace the created resources should use.</li>
			<li><b>esx_number_of_vms</b> - Indicate the number of virtual machines from which to get information. The default is 1. If the value is greater than 1, a suffix is added to VM names. The suffix consists of an underscore and the VM number ('_#').</li>
			<li><b>esx_timeout</b> - Specify the step execution timeout length in minutes. Leave blank for no timeout.</li>
		</ul>
		</p>
		
		<p class="help">
		The Export subprocedure exports a virtual machine to an OVF package.
		Export has the following fields:
		<ul>
			<li><b>connection_config</b> - Provide the name of the configuration that contains connection information for the ESX server.</li>
			<li><b>esx_host</b> - Provide the name of the host where the virtual machine is located.</li>
			<li><b>esx_datacenter</b> - Provide the name of the datacenter.</li>
			<li><b>esx_datastore</b> - Provide the name of the datastore.</li>
			<li><b>esx_vmname</b> - Provide the name of the virtual machine to export.</li>
			<li><b>esx_target_directory</b> - Provide the absolute path to the directory where virtual machines will be exported.</li>
			<li><b>esx_number_of_vms</b> - Indicate the number of virtual machines to export. The default is 1. If the value is greater than 1, a suffix is added to VM names. The suffix consists of an underscore and the VM number ('_#').</li>
			<li><b>esx_timeout</b> - Specify the step execution timeout length in minutes. Leave blank for no timeout.</li>
		</ul>
		</p>
		
		<p class="help">
		The GetVMConfiguration subprocedure gets the IP address and hostname of a virtual machine and stores them in the specified location in ElectricCommander properties.
		GetVMConfiguration has the following fields:
		<ul>
			<li><b>connection_config</b> - Provide the name of the configuration that contains connection information for the ESX server.</li>
			<li><b>esx_vmname</b> - Provide the name of the virtual machine from which to get information.</li>
			<li><b>esx_properties_location</b> - Indicate the ElectricCommander location to store properties containing information about the virtual machines. The default is '/myJob/ESX/vms'.</li>
			<li><b>esx_number_of_vms</b> - Indicate the number of virtual machines from which to get information. The default is 1. If the value is greater than 1, a suffix is added to VM names. The suffix consists of an underscore and the VM number ('_#').</li>
			<li><b>esx_timeout</b> - Specify the step execution timeout length in minutes. Leave blank for no timeout.</li>
		</ul>
		</p>
		
		<p class="help">
		The Import subprocedure imports an OVF package to the ESX server.
		Import has the following fields:
		<ul>
			<li><b>connection_config</b> - Provide the name of the configuration that contains connection information for the ESX server.</li>
			<li><b>esx_host</b> - Provide the name of the host where virtual machines will be imported.</li>
			<li><b>esx_datastore</b> - Indicate the name of the datastore to use.</li>
			<li><b>esx_vmname</b> - Indicate the name of the virtual machine to import.</li>
			<li><b>esx_source_directory</b> - Provide the absolute path to the directory where OVF packages are stored.</li>
			<li><b>esx_number_of_vms</b> - Indicate the number of virtual machines to import. The default is 1. If the value is greater than 1, a suffix is added to VM names. The suffix consists of an underscore and the VM number ('_#').</li>
			<li><b>esx_timeout</b> - Specify the step execution timeout length in minutes. Leave blank for no timeout.</li>
		</ul>
		</p>
		
		<p class="help">
		The PowerOn subprocedure powers on the specified virtual machine and optionally creates an ElectricCommander resource for the virtual machine.
		PowerOn has the following fields:
		<ul>
			<li><b>connection_config</b> - Provide the name of the configuration that contains connection information for the ESX server.</li>
			<li><b>esx_vmname</b> - Provide the name of the virtual machine to power on.</li>
			<li><b>esx_properties_location</b> - Indicate the ElectricCommander location to store properties containing information about the powered on virtual machines. The default is '/myJob/ESX/vms'.</li>
			<li><b>esx_create_resources</b> - If checked, this creates ElectricCommander resources for the powered on virtual machines.</li>
			<li><b>esx_pools</b> - Provide the ElectricCommander resource pool names to associate with the created resources if created.</li>
			<li><b>esx_workspace</b> - Indicate the ElectricCommander workspace the created resources should use.</li>
			<li><b>esx_number_of_vms</b> - Indicate the number of virtual machines to power on. The default is 1. If the value is greater than 1, a suffix is added to VM names. The suffix consists of an underscore and the VM number ('_#').</li>
			<li><b>esx_timeout</b> - Specify the step execution timeout length in minutes. Leave blank for no timeout.</li>
		</ul>
		</p>
			
		<p class="help">
		The RegisterVM subprocedure registers an existing virtual machine with the ESX server.
		RegisterVM has the following fields:
		<ul>
			<li><b>connection_config</b> - Provide the name of the configuration that holds connection information for the ESX server.</li>
			<li><b>esx_host</b> - Provide the name of the host where virtual machines will be registered.</li>
			<li><b>esx_datacenter</b> - Provide the name of the datacenter.</li>
			<li><b>esx_pool</b> - Provide the name of the resource pool to register the virtual machine.</li>
			<li><b>esx_vmxpath</b> - Provide the datastore path to the virtual machine configuration file (vmx).</li>
			<li><b>esx_vmname</b> - Assign a name to the virtual machine.</li>
			<li><b>esx_timeout</b> - Specify the step execution timeout length in minutes. Leave blank for no timeout.</li>
		</ul>
		</p>
			
		<p class="help">
		The Relocate subprocedure relocates a virtual machine to the specified destination host.
		Relocate has the following fields:
		<ul>
			<li><b>connection_config</b> - Provide the name of the configuration that contains connection information for the ESX server.</li>
			<li><b>esx_vmname</b> - Provide the name of the virtual machine to relocate.</li>
			<li><b>esx_datastore</b> - Provide the name of the datastore. The default is the datastore with the most free space.</li>
			<li><b>esx_vmhost_destination</b> - Indicate the garget host for the virtual machine.</li>
			<li><b>esx_number_of_vms</b> - Indicate the number of virtual machines to relocate. The default is 1. If the value is greater than 1, a suffix is added to VM names. The suffix consists of an underscore and the VM number ('_#').</li>
			<li><b>esx_timeout</b> - Specify the step execution timeout length in minutes. Leave blank for no timeout.</li>
		</ul>
		</p>      

        <p class="help">
		The Revert subprocedure reverts a virtual machine to the specified snapshot.
		Revert has the following fields:
		<ul>
			<li><b>connection_config</b> - Provide the name of the configuration that contains connection information for the ESX server.</li>
			<li><b>esx_vmname</b> - Provide the name of the source virtual machine.</li>
            		<li><b>esx_snapshotname</b> - Provide the name of snapshot to revert to.</li>
			<li><b>esx_poweron_vm</b> - If checked, this powers on the virtual machine(s) after being reverted.</li>
			<li><b>esx_number_of_vms</b> - Indicate the number of virtual machines to revert. The default is 1. If the value is greater than 1, a suffix is added to VM names. The suffix consists of an underscore and the VM number ('_#').</li>
			<li><b>esx_timeout</b> - Specify the step execution timeout length in minutes. Leave blank for no timeout.</li>
		</ul>
		</p>
		
		<p class="help">
		The Snapshot subprocedure creates a snapshot for the specified virtual machine.
		Snapshot has the following fields:
		<ul>			<li><b>connection_config</b> - Provide the name of the configuration that contains connection information for the ESX server.</li>
			<li><b>esx_vmname</b> - Provide the name of the virtual machine whose snapshot will be created.</li>
			<li><b>esx_snapshotname</b> - Provide the name of the snapshot to be created.</li>
			
			<li><b>esx_number_of_vms</b> - Indicate the number of virtual machines to snapshot. The default is 1. If the value is greater than 1, a suffix is added to VM names. The suffix consists of an underscore and the VM number ('_#').</li>
			
			<li><b>esx_timeout</b> - Specify the step execution timeout length in minutes. Leave blank for no timeout.</li>
			
		</ul>
		</p>
                
        <p class="help">
		The PowerOff/Shutdown/Suspend subprocedure powers off/shuts down/suspends the specified virtual machine.
		PowerOff, Shutdown, and Suspend have the following fields:
		<ul>
			<li><b>connection_config</b> - Provide the name of the configuration that contains connection information for the ESX server.</li>
			<li><b>esx_vmname</b> - Provide the name of the virtual machine to power off/shut down/suspend.</li>
			<li><b>esx_number_of_vms</b> - Indicate the number of virtual machines to power off/shut down/suspend. The default is 1. If the value is greater than 1, a suffix is added to VM names. The suffix consists of an underscore and the VM number ('_#').</li>
			<li><b>esx_timeout</b> - Specify the step execution timeout length in minutes. Leave blank for no timeout.</li>
		</ul>
		</p>
		
	<h2 class="help">OVF Tool</h2>
		<p class="help">
		VMware OVF Tool is a command line utility that allows you to import and export OVF packages. In order to execute Import and Export procedures using the ESX plugin, OVF Tool must be installed. You can download this utility from the <a href="http://communities.vmware.com/community/vmtn/vsphere/automationtools/ovf">OVF Tool page</a>. You must have an account to download this tool. If you do not have an account, you can create one for free.
		</p>
		
		<p class="help">
		After downloading VMware OVF Tool, use the corresponding install method for your operating system:
		</p>
		<table border="0" class="help">
			<tr>
				<th>Operating System</th>
				<th>Installation Method</th>
			</tr>
			<tr>
				<td>Linux 32-bit</td>
				<td>Run the shell script as ./VMware-OVF-Tool.sh</td>
			</tr>
			<tr>
				<td>Linux 64-bit</td>
				<td>Run the shell script as ./VMware-OVF-Tool.x86_64.sh</td>
			</tr>
			<tr>
				<td>Mac 64-bit</td>
				<td></td>
			</tr>
			<tr>
				<td>Windows 32-bit</td>
				<td>Double-click the installer, VMware-OVF-Tool.exe</td>
			</tr>
			<tr>
				<td>Windows 64-bit</td>
				<td>Double-click the installer, VMware-OVF-Tool.x86_64.exe</td>
			</tr>
		</table>
		<p class="help">
		For more information, download the OVF Tool User Guide from <a href="http://www.vmware.com/support/developer/ovf/">OVF Tool Documentation page</a>.
		</p>
		
		
	<h2 class="help">Additional Information</h2>
		<ul>
			<li><a href="http://www.vmware.com/products/vsphere/esxi-and-esx/index.html">VMware ESX home page</a></li>         
			<li><a href="http://communities.vmware.com/community/vmtn/vsphere/automationtools/ovf">OVF Tool community page</a></li>            
		</ul>
        
    <h2 class="help">Release Notes</h2>
    
        <h3 class="help">EC-ESX-1.2.2.0</h3>
        <p class="help">
        <ul>
            <li>Included vSphere SDK for Perl in the plugin, removed sdk_installation_path parameter from all procedures</li>
            <li>Removed CreateConfiguration and DeleteConfiguration procedures from the wizard/procedure selection</li>
        	<li>Updated Help page</li>
        </ul>
        </p> 
    
        <h3 class="help">EC-ESX-1.2.1.0</h3>
        <p class="help">
        <ul>
        	<li>Updated Help page</li>
        </ul>
        </p> 
		
		<h3 class="help">EC-ESX-1.2.0.0</h3>
        <p class="help">
        <ul>
        	<li>Modified the Cleanup and Create subprocedures</li>
        	<li>Added the ability for all subprocedures to perform operations for multiple virtual machines</li>
		<li>Added the timeout parameter to all steps</li>
		<li>Added these subprocedures: PowerOn, PowerOff, Shutdown, Suspend, GetVMConfiguration, CreateResourceFromVM, Import, Export, and RegisterVM </li>
        </ul>
        </p>     
        
        <h3 class="help">EC-ESX-1.1.0.0</h3>
        <p class="help">
        <ul>
        <li>Added the Snapshot subprodecure</li>
        </ul>
        </p>    

 
		
	</div>  </componentContainer>
</helpDefinition>
