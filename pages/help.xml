<helpDefinition>
  <title>EC-ESX - Help</title>
  <componentContainer>
	<LINK REL="StyleSheet" HREF="../../plugins/EC-ESX/pluginhelp.css" TYPE="text/css" MEDIA="screen"/>
	<div class="help" >
    
    <h1 class="help">EC-ESX</h1>

    <h2 class="help">Overview</h2>
		<p class="help">
        The EC-ESX plugin allows users to manipulate virtual machines on ESX servers. The plugin provides the following actions to perform on virtual machines: cleanup, clone, create, relocate,  revert, and snapshot. The plugin uses <a href="http://communities.vmware.com/community/developer/forums/vsphere_sdk_perl">vSphere SDK for Perl</a> to accomplish these tasks, which means that you must install the SDK.
		</p>
	
    <h2 class="help">Configuration</h2>
		<p class="help">
		The plugin allows users to store connection configurations in the plugin project.
		</p>
		
		<p class="help">
		To manage your ESX configuration, go to Administration > Plugins and click the EC-ESX <b>Configure</b> link.
		</p>
	
		<p class="help">
		Configurations have the following properties:
		<ul>
			<li>Configuration name - The name of the configuration.</li>
			<li>ESX URL - The URL for the ESX server.</li>
			<li>Credential - Username and password for the ESX server.</li>
		</ul>
		</p>
        
        <p class="help">
		This plugin requires vSphere SDK for Perl. The SDK provides an easy-to-use Perl scripting interface to the vSphere API. You can download the SDK from the <a href="http://communities.vmware.com/community/developer/forums/vsphere_sdk_perl">vSphere SDK for Perl home page</a>. You must have an account to download the SDK. If you do not have an account, you can create one for free.
		</p>
		
	<h2 class="help">Using the Plugin</h2>
		<p class="help">
		When creating a procedure, do the following:
		<ol>
			<li>Click <b>Add Step</b> on the <b>Steps</b> panel.</li>
			<li>Select the Subprocedure category.</li>
			<li>In the Project field, select <b>EC-ESX</b>.</li>
			<li>In the Procedure field, select the procedure you wish to execute: Cleanup, Clone, Create, Relocate, Revert, or Snapshot.</li>
			<li>Click <b>OK</b>.</li>
		</ol>
		</p>
		
		<p class="help">
		The subprocedure you select determines which fields are available.
		</p>		

        <p class="help">
		Cleanup subprocedure deletes ElectricCommander recources and optionally destroys the virtual machines in ESX server given a virtual machine name.
		The following fields are available for Cleanup:
		<ul>
			<li>connection_config - The name of the configuration that holds connection information for the ESX server (created on the Configure page).</li>
			<li>esx_vmname - Name of the virtual machine to cleanup.</li>
			<li>esx_delete_vm - Flag to specify whether or not to destroy the virtual machine.</li>
			<li>esx_number_of_vms - Number of virtual machines to cleanup. Default value is 1. If value is greater than 1, a suffix is added to vm names. The suffix consists of a underscore and the vm number ('_#').</li>
			<li>esx_timeout - Timeout for the step execution in minutes. Blank means no timeout.</li>
			<li>sdk_installation_path - Absolute path to the SDK installation lib. Default value is 'C:\Program Files\VMware\VMware vSphere CLI\Perl\lib'.</li>
		</ul>
		</p>
		
		<p class="help">
		Clone subprocedure creates one or more clones of a virtual machine given its name.
		The following fields are available for Clone:
		<ul>
			<li>connection_config - The name of the configuration that holds connection information for the ESX server (created on the Configure page).</li>
			<li>esx_vmname - Name of the virtual machine whose clone is to be created.</li>
			<li>esx_datastore - Name of the datastore. Default value is the datastore with the most free space.</li>
			<li>esx_vmname_destination - Name of the clone virtual machine which will be created.</li>
			<li>esx_vmhost_destination - Target host for the new virtual machine.</li>
			<li>esx_number_of_clones - Number of clones to be created. Default value is 1. If value is greater than 1, a suffix is added to cloned vm names. The suffix consists of a underscore and the clone number ('_#').</li>
			<li>esx_timeout - Timeout for the step execution in minutes. Blank means no timeout.</li>
			<li>sdk_installation_path - Absolute path to the SDK installation lib. Default value is 'C:\Program Files\VMware\VMware vSphere CLI\Perl\lib'.</li>
		</ul>
		</p>
		
		<p class="help">
		Create subprocedure creates virtual machines in ESX server given the required configuration parameters.
		The following fields are available for Create:
		<ul>
			<li>connection_config - The name of the configuration that holds connection information for the ESX server (created on the Configure page).</li>
			<li>esx_vmname - Name of the virtual machine to be created.</li>
			<li>esx_datastore - Name of the datastore. Default value is any accessible datastore with free space greater than the disk size specified.</li>
			<li>esx_vmhost - Name of the host.</li>
			<li>esx_datacenter - Name of the datacenter.</li>
			<li>esx_guestid - Guest operating system identifier. Default value is 'winXPProGuest'.</li>
			<li>esx_disksize - Capacity of the virtual disk (in KB). Default value is 4096.</li>
			<li>esx_memory - Size of virtual machine's memory (in MB). Default value is 256.</li>
			<li>esx_num_cpus - Number of virtual processors in a virtual machine. Default value is 1.</li>
			<li>esx_nic_network - Network name. Default value is any accessible network.</li>
			<li>esx_nic_poweron - Flag to specify whether or not to connect the device when the virtual machine starts. Default value is 0.</li>
			<li>esx_vm_poweron - Flag to specify whether or not to power on the created virtual machine(s). Default value is 0.</li>
			<li>esx_number_of_vms - Number of virtual machines to create. Default value is 1. If value is greater than 1, a suffix is added to vm names. The suffix consists of a underscore and the vm number ('_#').</li>
			<li>esx_timeout - Timeout for the step execution in minutes. Blank means no timeout.</li>
			<li>sdk_installation_path - Absolute path to the SDK installation lib. Default value is 'C:\Program Files\VMware\VMware vSphere CLI\Perl\lib'.</li>
		</ul>
		</p>
		
		<p class="help">
		CreateResourceFromVM subprocedure has the same functionality as GetVMConfiguration subprocedure, and additionally creates an ElectricCommander resource	for each virtual machine.
		The following fields are available for CreateResourceFromVM:
		<ul>
			<li>connection_config - The name of the configuration that holds connection information for the ESX server (created on the Configure page).</li>
			<li>esx_vmname - Name of the virtual machine to get the information from.</li>
			<li>esx_properties_location - The ElectricCommander location to store properties containing information about the powered on virtual machines. Default value is '/myJob/ESX/vms'.</li>
			<li>esx_create_resources - Flag to specify whether or not to create ElectricCommander resources for the created virtual machines. Default value is 0.</li>
			<li>esx_pools - The ElectricCommander resource pool names to be associated with the created resources if created.</li>
			<li>esx_workspace - The ElectricCommander workspace the created resources should use.</li>
			<li>esx_number_of_vms - Number of virtual machines to get the information from. Default value is 1. If value is greater than 1, a suffix is added to vm names. The suffix consists of a underscore and the vm number ('_#').</li>
			<li>esx_timeout - Timeout for the step execution in minutes. Blank means no timeout.</li>
			<li>sdk_installation_path - Absolute path to the SDK installation lib. Default value is 'C:\Program Files\VMware\VMware vSphere CLI\Perl\lib'.</li>
		</ul>
		</p>
		
		<p class="help">
		Export subprocedure exports a virtual machine to an OVF package.
		The following fields are available for Export:
		<ul>
			<li>connection_config - The name of the configuration that holds connection information for the ESX server (created on the Configure page).</li>
			<li>esx_host - Name of the host where virtual machine is located.</li>
			<li>esx_datacenter - Name of the datacenter.</li>
			<li>esx_datastore - Name of the datastore.</li>
			<li>esx_vmname - Name of the virtual machine to export.</li>
			<li>esx_target_directory - Absoulte path to the directory where virtual machines will be exported.</li>
			<li>esx_number_of_vms - Number of virtual machines to export. Default value is 1. If value is greater than 1, a suffix is added to vm names. The suffix consists of a underscore and the vm number ('_#').</li>
			<li>esx_timeout - Timeout for the step execution in minutes. Blank means no timeout.</li>
		</ul>
		</p>
		
		<p class="help">
		GetVMConfiguration subprocedure get the IP address and hostname of a virtual machine and store them in the specified location in ElectricCommander properties.
		The following fields are available for GetVMConfiguration:
		<ul>
			<li>connection_config - The name of the configuration that holds connection information for the ESX server (created on the Configure page).</li>
			<li>esx_vmname - Name of the virtual machine to get the information from.</li>
			<li>esx_properties_location - The ElectricCommander location to store properties containing information about the virtual machines. Default value is '/myJob/ESX/vms'.</li>
			<li>esx_number_of_vms - Number of virtual machines to get the configuration from. Default value is 1. If value is greater than 1, a suffix is added to vm names. The suffix consists of a underscore and the vm number ('_#').</li>
			<li>esx_timeout - Timeout for the step execution in minutes. Blank means no timeout.</li>
			<li>sdk_installation_path - Absolute path to the SDK installation lib. Default value is 'C:\Program Files\VMware\VMware vSphere CLI\Perl\lib'.</li>
		</ul>
		</p>
		
		<p class="help">
		Import subprocedure imports an OVF package to the ESX server.
		The following fields are available for Import:
		<ul>
			<li>connection_config - The name of the configuration that holds connection information for the ESX server (created on the Configure page).</li>
			<li>esx_host - Name of the host where virtual machines will be imported.</li>
			<li>esx_datastore - Name of the datastore to be used.</li>
			<li>esx_vmname - Name of the virtual machine to import.</li>
			<li>esx_source_directory - Absoulte path to the directory where OVF packages are stored.</li>
			<li>esx_number_of_vms - Number of virtual machines to import. Default value is 1. If value is greater than 1, a suffix is added to vm names. The suffix consists of a underscore and the vm number ('_#').</li>
			<li>esx_timeout - Timeout for the step execution in minutes. Blank means no timeout.</li>
		</ul>
		</p>
		
		<p class="help">
		PowerOn subprocedure powers on the specified virtual machine and optionally creates an ElectricCommander resource for the virtual machine.
		The following fields are available for PowerOn:
		<ul>
			<li>connection_config - The name of the configuration that holds connection information for the ESX server (created on the Configure page).</li>
			<li>esx_vmname - Name of the virtual machine to poweron.</li>
			<li>esx_properties_location - The ElectricCommander location to store properties containing information about the powered on virtual machines. Default value is '/myJob/ESX/vms'.</li>
			<li>esx_create_resources - Flag to specify whether or not to create ElectricCommander resources for the powered on virtual machines. Default value is 0.</li>
			<li>esx_pools - The ElectricCommander resource pool names to be associated with the created resources if created.</li>
			<li>esx_workspace - The ElectricCommander workspace the created resources should use.</li>
			<li>esx_number_of_vms - Number of virtual machines to power on. Default value is 1. If value is greater than 1, a suffix is added to vm names. The suffix consists of a underscore and the vm number ('_#').</li>
			<li>esx_timeout - Timeout for the step execution in minutes. Blank means no timeout.</li>
			<li>sdk_installation_path - Absolute path to the SDK installation lib. Default value is 'C:\Program Files\VMware\VMware vSphere CLI\Perl\lib'.</li>
		</ul>
		</p>
				
		<p class="help">
		Relocate subprocedure relocates a virtual machine to the specified destination host.
		The following fields are available for Relocate:
		<ul>
			<li>connection_config - The name of the configuration that holds connection information for the ESX server (created on the Configure page).</li>
			<li>esx_vmname - Name of the virtual machine to be relocated.</li>
			<li>esx_datastore - Name of the datastore. Default value is the datastore with the most free space.</li>
			<li>esx_vmhost_destination - Target host for the virtual machine.</li>
			<li>esx_number_of_vms - Number of virtual machines to relocated. Default value is 1. If value is greater than 1, a suffix is added to vm names. The suffix consists of a underscore and the vm number ('_#').</li>
			<li>esx_timeout - Timeout for the step execution in minutes. Blank means no timeout.</li>
            <li>sdk_installation_path - Absolute path to the SDK installation lib. Default value is 'C:\Program Files\VMware\VMware vSphere CLI\Perl\lib'.</li>
		</ul>
		</p>      

        
        <p class="help">
		Revert subprocedure reverts a virtual machine to the specified snapshot.
		The following fields are available for Revert:
		<ul>
			<li>connection_config - The name of the configuration that holds connection information for the ESX server (created on the Configure page).</li>
			<li>esx_vmname - Name of the source virtual machine.</li>
            <li>esx_snapshotname - Name of snapshot to revert to.</li>
			<li>esx_poweron_vm - Flag to specify whether or not to power on the virtual machine(s) after being reverted. Default value is 0.</li>
			<li>esx_number_of_vms - Number of virtual machines to revert. Default value is 1. If value is greater than 1, a suffix is added to vm names. The suffix consists of a underscore and the vm number ('_#').</li>
			<li>esx_timeout - Timeout for the step execution in minutes. Blank means no timeout.</li>
            <li>sdk_installation_path - Absolute path to the SDK installation lib. Default value is 'C:\Program Files\VMware\VMware vSphere CLI\Perl\lib'.</li>
		</ul>
		</p>
		
		<p class="help">
		Snapshot subprocedure creates a snapshot for the specified virtual machine.
		The following fields are available for Snapshot:
		<ul>
			<li>connection_config - The name of the configuration that holds connection information for the ESX server (created on the Configure page).</li>
			<li>esx_vmname - Name of the virtual machine whose snapshot is to be created.</li>
			<li>esx_snapshotname - Name of the snapshot to be created.</li>
			<li>esx_number_of_vms - Number of virtual machines to snapshot. Default value is 1. If value is greater than 1, a suffix is added to vm names. The suffix consists of a underscore and the vm number ('_#').</li>
			<li>esx_timeout - Timeout for the step execution in minutes. Blank means no timeout.</li>
			<li>sdk_installation_path - Absolute path to the SDK installation lib. Default value is 'C:\Program Files\VMware\VMware vSphere CLI\Perl\lib'.</li>
		</ul>
		</p>
                
        <p class="help">
		PowerOff/Shutdown/Suspend subprocedure powersoff/shutsdown/suspends the specified virtual machine.
		The following fields are available for PowerOff, Shutdown, and Suspend:
		<ul>
			<li>connection_config - The name of the configuration that holds connection information for the ESX server (created on the Configure page).</li>
			<li>esx_vmname - Name of the virtual machine to poweron/poweroff/shutdown/suspend.</li>
			<li>esx_number_of_vms - Number of virtual machines to poweroff/shutdown/suspend. Default value is 1. If value is greater than 1, a suffix is added to vm names. The suffix consists of a underscore and the vm number ('_#').</li>
			<li>esx_timeout - Timeout for the step execution in minutes. Blank means no timeout.</li>
			<li>sdk_installation_path - Absolute path to the SDK installation lib. Default value is 'C:\Program Files\VMware\VMware vSphere CLI\Perl\lib'.</li>
		</ul>
		</p>
	
	<h2 class="help">Additional Information</h2>
		<ul>
			<li><a href="http://www.vmware.com/products/vsphere/esxi-and-esx/index.html">VMWare ESX home page</a></li>
			<li><a href="http://communities.vmware.com/community/developer/forums/vsphere_sdk_perl">vSphere SDK for Perl home page</a></li>
			<li><a href="http://www.vmware.com/support/developer/viperltoolkit/">vSphere SDK for Perl documentation page</a></li>            
		</ul>
        
    <h2 class="help">Release Notes</h2>
        <h3 class="help">EC-ESX-1.1.0.0</h3>
        <p class="help">
        Added the Snapshot subprodecure.
        </p>    

        <h3 class="help">EC-ESX-1.2.0.0</h3>
        <p class="help">
        Modified Cleanup subprocedure.
		Modified Create subprocedure.
		Added the functionality to perform operation for multiple virtual machines to all subprocedures.
		Added timeout parameters to all steps.
        Added the PowerOn, PowerOff, Shutdown, Suspend, GetVMConfiguration, CreateResourceFromVM, Import, and Export subprocedures.
        </p>  
		
	</div>  </componentContainer>
</helpDefinition>
